(()=>{const i=(e,t=document)=>t.querySelector(e),l=(e,t=document)=>[...t.querySelectorAll(e)],E=i("#site-header"),u=i("#header-burger"),w=i("#mobile-menu"),f=i("#sr-toast"),b={register:i("#register-window"),login:i("#login-window")};function g(e,t="success"){window.Swal&&Swal.fire({toast:!0,icon:t,title:e,position:"top-end",showConfirmButton:!1,timer:2600,timerProgressBar:!0,didOpen:r=>{r.setAttribute("role","status"),r.setAttribute("aria-live","polite")}}),f&&(f.textContent="",setTimeout(()=>{f.textContent=e},50))}const L=e=>l('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',e).filter(t=>!t.hasAttribute("disabled")&&!t.getAttribute("aria-hidden"));let a=null;function y(e){return e.hidden=!1,e.classList.remove("is-closing"),e.classList.add("is-opening"),new Promise(t=>{const r=n=>{n&&n.target!==e||(e.classList.remove("is-opening"),e.removeEventListener("animationend",r),t())};e.addEventListener("animationend",r)})}function A(e){return e.classList.remove("is-opening"),e.classList.add("is-closing"),new Promise(t=>{const r=n=>{n&&n.target!==e||(e.classList.remove("is-closing"),e.hidden=!0,e.removeEventListener("animationend",r),t())};e.addEventListener("animationend",r)})}async function _(e){const t=b[e];if(!t||a)return;a=t,await y(t),document.documentElement.style.overflow="hidden",E?.setAttribute("aria-hidden","true");const r=L(t),n=r[0],o=r.at(-1);t._trap=d=>{d.key==="Tab"&&(d.shiftKey&&document.activeElement===n?(o.focus(),d.preventDefault()):!d.shiftKey&&document.activeElement===o&&(n.focus(),d.preventDefault()))},t.addEventListener("keydown",t._trap),n?.focus()}async function c(){if(!a)return;const e=a;e.removeEventListener("keydown",e._trap||(()=>{})),await A(e),a=null,document.documentElement.style.overflow="",E?.removeAttribute("aria-hidden")}l("[data-open]").forEach(e=>{e.addEventListener("click",()=>_(e.dataset.open))}),l("[data-close]").forEach(e=>e.addEventListener("click",c)),l(".modal").forEach(e=>{e.addEventListener("mousedown",t=>{t.target===e&&c()})}),document.addEventListener("keydown",e=>{e.key==="Escape"&&c()}),u?.addEventListener("click",()=>{const e=u.getAttribute("aria-expanded")==="true";u.setAttribute("aria-expanded",String(!e)),w.hidden=e});const m={username:/^[a-zA-Z0-9_]{3,20}$/,email:/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/,strong:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d!@#$%^&*()_+\-={}[\]:;"'<>?,.\/]{6,}$/};function x(e){let t=e.closest(".field")?.querySelector(".field__error");return t||(t=document.createElement("small"),t.className="field__error",t.hidden=!0,e.closest(".field")?.appendChild(t)),t.id||(t.id=e.name?`err-${e.name}`:`err-${Math.random().toString(36).slice(2)}`),t}function s(e,t){const r=x(e);e.setAttribute("aria-invalid","true"),e.setAttribute("aria-describedby",r.id),r.textContent=t,r.hidden=!1,e.closest(".field")?.classList.add("field--error")}function S(e){const t=e.closest(".field")?.querySelector(".field__error");e.setAttribute("aria-invalid","false"),t&&(t.textContent="",t.hidden=!0),e.closest(".field")?.classList.remove("field--error")}function v(e){const t=e.name||"",r=e.value.trim();if(t==="username"){if(!r)return s(e,"Введіть ім’я користувача");if(!m.username.test(r))return s(e,"3–20 символів, латиниця/цифри/_")}if(t==="email"){if(!r)return s(e,"Введіть email");if(!m.email.test(r))return s(e,"Невірний формат email")}if(t==="password"){if(!r)return s(e,"Введіть пароль");if(!m.strong.test(r))return s(e,"Мінімум 6 символів, літера і цифра")}S(e)}function h(e){if(!e)return;const t=e.querySelectorAll(".field__input[name]");t.forEach(r=>{r.setAttribute("aria-invalid","false"),r.addEventListener("input",()=>v(r)),r.addEventListener("blur",()=>v(r))}),e.addEventListener("submit",async r=>{let n=!1;if(t.forEach(o=>{v(o),o.getAttribute("aria-invalid")==="true"&&(n=!0)}),n){r.preventDefault(),e.classList.add("is-invalid"),setTimeout(()=>e.classList.remove("is-invalid"),420);return}r.preventDefault(),await c(),g(e.closest("#register-window")?"Реєстрація успішна!":"Вхід виконано!","success")})}h(i("#register-window form")),h(i("#login-window form"))})();
//# sourceMappingURL=login-BY45mZaQ.js.map
